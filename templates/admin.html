<!DOCTYPE html>
<html>
<head><title>ê´€ë¦¬ì í˜ì´ì§€</title></head>
<body>
  <h2>ë‹¹ì²¨ í†µê³„</h2>
  <ul>
    {% for prize, count in stats.items() %}
      <li>{{ prize }}: {{ count }}ê°œ</li>
    {% endfor %}
  </ul>

  <h3>ìˆ˜ë ¹ì ëª©ë¡</h3>

  <a href="/download/excel" download>
    <button style="margin-top: 20px;">ğŸ¯ ì—‘ì…€ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</button>
  </a>

  <table border="1">
    <tr><th>ì´ë¦„</th><th>ì „í™” ë’·ìë¦¬</th><th>ìƒí’ˆ</th><th>ì¼ë ¨ë²ˆí˜¸</th></tr>
    {% for log in logs %}
      <tr>
        <td>{{ log.name }}</td>
        <td>{{ log.phone }}</td>
        <td>{{ log.prize }}</td>
        <td>{{ log.serial }}</td>
      </tr>
    {% endfor %}

  </table>

  <form id="clear-form">
    <button type="submit" style="margin-top:20px; background:red; color:white;">ëª¨ë“  ë¡œê·¸ ë° ì´ë¯¸ì§€ ì‚­ì œ</button>
  </form>

  <script>
    document.getElementById('clear-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!confirm("ì •ë§ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")) return;

      const response = await fetch('/admin/clear', {
        method: 'POST'
      });

      const result = await response.json();
      if (result.status === 'success') {
        alert('ì‚­ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
        window.location.reload();
      } else {
        alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ');
      }
    });
  </script>

</body>
</html>
